{% extends "base.html" %}

{% block title %}Welcome - PanRes Database Explorer{% endblock %}

{% block content %}
    <h2>Welcome to the PanRes Database Explorer!</h2>
    <p>
        The <strong>PanRes database</strong> aggregates antimicrobial resistance genes (ARGs)
        from various established collections to facilitate large-scale analysis. Each unique
        sequence is assigned a <code>pan_</code> identifier (PanRes Gene).
    </p>
    <p>
        It integrates data from sources like:
        ResFinder, ResFinderFG, CARD, MegaRes, AMRFinderPlus, ARGANNOT, the 'CsabaPal' collection, and BacMet.
        This explorer allows you to browse the genes, their origins, associated resistance classes,
        predicted phenotypes, and other relationships defined within the underlying data model.
    </p>
    <p>
        (Based on the work: <i>"ARGfinder - a pipeline for large-scale analysis of antimicrobial resistance genes and their flanking regions in metagenomic datasets" (Unpublished, submitted)</i>).
    </p>


    <h3>Explore PanRes Data</h3>
    <p>Select a category below to view the items or concepts within it:</p>

    <div class="category-grid">
        {# Check if category_data exists and is not empty #}
        {% if category_data %}
            {% for display_name, data in category_data.items() %}
            <div class="category-card">
                {# Card content wrapper #}
                <div>
                    <h4>{{ display_name }}</h4>
                     {% if data.config.description %}
                        <p class="category-description">{{ data.config.description }}</p> {# Add description #}
                     {% endif %}
                    <p class="count">
                        {% if data.count is number %}
                             {{ "{:,}".format(data.count) }} item(s) {# Format count with commas #}
                        {% elif data.count == 0 %}
                             0 items
                        {% else %}
                            <span class="error-count">{{ data.count }}</span> {# Show error message #}
                        {% endif %}
                    </p>
                </div>
                {# Button links to the generic list_items route, passing the display_name as the key #}
                <a href="{{ url_for('list_items', category_key=display_name) }}" class="button">Browse</a>
            </div>
            {% endfor %}
        {% else %}
            <p>No browseable categories defined or found. Check application configuration.</p>
        {% endif %}
    </div>

{% endblock %} 